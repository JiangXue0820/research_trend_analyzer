# Paper Info

## Title
Johnny Can’t Revoke Consent Either: Measuring Compliance of Consent Revocation on the Web

## Authors
Gayatri Priyadarsini Kancherla, Nataliia Bielova, Cristiana Santos, Abhishek Bichhawat

## Affiliations
(Indian Institute of Technology Gandhinagar, India), (Inria Centre at University Côte d’Azur, France), (Utrecht University, Netherlands)

# Brief Summary

## Highlight
本文首次深入研究了欧盟通用数据保护条例（GDPR）下网站同意撤销（consent revocation）机制的合规性。现有研究主要关注同意的获取，而忽略了撤销环节。作者提出了一个半自动化的审计框架，通过分析用户界面、Cookie行为、同意信息存储和第三方通信，系统性地衡量了网站在撤销同意方面的合规情况。研究发现，网络上普遍存在违规行为：20.5%的网站撤销同意比接受同意更麻烦，57.5%的网站在用户撤销同意后并未删除追踪Cookie，高达74.2%的网站未将撤销决定通知所有相关的第三方，导致用户数据被持续非法处理。这项工作揭示了当前同意管理实践中的重大缺陷，并为监管机构和开发者提供了改进方向。

## Keywords
Consent Revocation, GDPR, Consent Management Platform, Web Tracking, Compliance Measurement

# Detailed Summary

## 1. Motivation

### 1.1 Background
欧盟的《通用数据保护条例》（GDPR）赋予用户随时撤销其数据处理同意的权利。网站通常通过同意管理横幅（consent banners）来获取用户同意。尽管已有大量研究分析了网站如何获取用户同意，但对于用户如何行使“撤销同意”这一关键权利，以及网站在技术上是否正确执行了这一过程，学术界和监管机构都缺乏深入的了解。

### 1.2 Problem Statement
目前尚不清楚网站是否为用户提供了合规的同意撤销方法，撤销后的决定是否被正确存储在后端，以及这一决定是否被有效传达给了最初获得同意的第三方广告和分析服务商。本文旨在填补这一空白，系统性地衡量网络上同意撤销机制的合规性。

## 2. State-of-the-Art Methods

### 2.1 Existing Methods
*   **同意横幅合规性分析：** 先前的工作主要集中在分析同意横幅的设计，例如是否存在“拒绝”按钮、是否使用“暗黑模式”（dark patterns）诱导用户接受等。
*   **IAB TCF框架研究：** 部分研究评估了IAB欧洲透明度与同意框架（TCF）在获取和存储用户同意方面的实施情况。
*   **选择退出（Opt-out）机制研究：** 在美国加州隐私法规（如CCPA/CPRA）的背景下，一些研究分析了网站“选择退出”链接的合规性，但其法律框架和技术要求与GDPR下的“撤销同意”不同。

### 2.2 Limitations of Existing Methods
现有研究几乎完全忽略了GDPR框架下的“同意撤销”环节。它们没有系统地评估：
*   撤销同意的用户界面是否便捷合规。
*   用户撤销同意后，依赖于该同意的追踪技术（如Cookie）是否被停用或删除。
*   撤销的决定是否在网站的后端系统中被正确记录，并通知所有相关的数据处理方。

## 3. Proposed Method

### 3.1 Main Contributions
*   **首次对同意撤销进行全面审计：** 本文首次对网站的同意撤销机制进行了端到端的合规性测量，涵盖了从用户界面到后端数据处理的全过程。
*   **提出多维度审计框架：** 建立了一个结合法律分析和技术测量的审计方法，用于评估撤销界面的合规性、Cookie的存废、同意信息的存储一致性以及对第三方的通信。
*   **揭示普遍存在的违规行为：** 通过对顶级网站的大规模分析，发现了多种严重的、普遍存在的违规实践，并量化了其影响范围。
*   **提供改进建议：** 基于研究发现，为监管机构、标准制定组织（如IAB）和网站开发者提供了具体的改进建议。

### 3.2 Core Idea
该方法采用一个基于Selenium的半自动化爬虫，模拟用户在四个关键阶段与网站互动：**1) 首次访问 (Initial landing)**、**2) 接受同意后 (After acceptance)**、**3) 撤销同意后 (After revocation)**、**4) 拒绝同意后 (After rejection)**。在每个阶段，爬虫会自动收集以下数据：
*   **界面截图：** 用于手动分析撤销选项的位置和操作步骤。
*   **Cookie数据：** 用于分析广告和分析类（AA）Cookie在撤销同意后的变化。
*   **浏览器存储：** 检查同意信息（如TCF的TCString）在localStorage和Cookie中的存储情况。
*   **网络日志：** 捕获HTTP请求和响应，分析同意信息如何被传递给第三方，以及撤销后通信是否中断或更新。
该方法特别针对了主流的同意管理平台（CMP）如IAB TCF和OneTrust，通过注入脚本来监控其API调用，以验证同意信息的一致性。

### 3.3 Novelty
*   **研究焦点的创新：** 从关注“同意获取”转向“同意撤销”，填补了隐私合规性研究的一个重要空白。
*   **审计维度的全面性：** 提出的框架不仅分析用户可见的界面，还深入到技术实现的后端，包括数据存储和网络通信，提供了一个更完整的合规性视图。
*   **深入的网络流量分析：** 提出了一种更全面的方法，用于从HTTP请求/响应的多个部分（URL参数、POST数据、响应体）提取同意字符串，从而更准确地追踪其在第三方间的流动。

## 4. Experiment Results

### 4.1 Experimental Setup
*   **数据集：** 界面和Cookie分析使用了Tranco排名前200的网站（其中158个可访问）；后端存储和通信分析使用了281个实现了IAB TCF或OneTrust的网站（来自Tranco排名前5000）。
*   **基线方法：** 由于这是该领域的首次研究，没有直接的基线方法进行比较。实验结果直接与从GDPR及其指南中提炼出的法律要求进行对比。
*   **评价指标：** 包括撤销界面的类型和操作复杂度、撤销同意前后AA Cookie的数量变化、同意字符串的存储一致性，以及未被通知同意状态变更的第三方比例。

### 4.2 Experimental Results
研究发现了普遍且严重的违规行为：
*   **界面合规性差：** 20.5%的网站撤销同意比接受同意需要更多步骤；19.87%的网站通过其他界面（如要求用户修改浏览器设置）来处理撤销，增加了用户负担；2.48%的网站甚至没有提供任何撤销选项。
*   **Cookie未被删除：** 在57.5%的网站上，用户撤销同意后，用于广告和分析的AA Cookie并未被删除，这意味着基于同意的数据处理仍在非法进行。
*   **同意信息存储错误：** 许多实施了CMP的网站在用户撤销后，其API和浏览器存储中仍记录着“同意”的状态（例如，12.5%的TCF API和14.5%的OneTrust API存在此问题）。
*   **第三方未被通知：** 这是最严重的发现之一。在74.2%使用TCF框架的网站上，那些在用户接受同意时收到了通知的第三方（如`doubleclick.net`、`criteo.com`等大型广告平台），在用户撤销同意后并未收到任何更新通知，导致这些第三方在用户不知情的情况下继续非法处理其个人数据。

## 5. Limitations and Future Work

### 5.1 Limitations
*   **Cookie分类的准确性：** 研究依赖于第三方工具（CookieBlock）对Cookie进行分类，可能存在误差。
*   **数据收集的自动化程度：** 寻找撤销选项的过程需要人工介入，这限制了研究的可扩展性并可能引入主观偏差。
*   **网络通信捕获不完全：** 可能无法捕获所有形式的同意信息通信，特别是当网站采用非标准格式或存在延迟更新时。
*   **API监控的局限性：** 无法有效追踪通过非标准事件监听器（event listeners）进行的API访问，可能低估了第三方获取同意信息的频率。

### 5.2 Future Directions
*   **推动标准化：** 建议监管机构和标准组织（如IAB Europe）统一同意撤销界面的设计规范（如位置、措辞），并标准化同意信息的存储和保护机制，防止被恶意脚本篡改。
*   **规范第三方通信：** 建议明确网站应如何将同意撤销的决定传达给第三方。鉴于当前通过HTTP请求传递信息的方式极其不可靠，应推广使用标准化的事件监听器机制。
*   **提升自动化审计能力：** 未来的研究可以探索利用机器学习或自然语言处理技术，开发全自动的工具来识别和操作各种撤销界面，从而实现更大规模、更持续的合规性监控。